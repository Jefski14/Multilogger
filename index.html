<html>
  <head>
    <title>Multilogger Eingabe</title>
  </head>
  <body>
	<p>Daten per URL empfangen!</p>
    <?php 
    // multilogger.php 
    // benÃ¶tigt 6 Variablen, getrennt mittels '&'-Zeichen:
    // zum Beispiel: abcdef&&$d&&$t&&$i&&$v
    // Argument 0 = 'password' (abcdef)
    // Argument 1 = $d  Datum 
    // Argument 2 = $t  Zeit 
    // Argument 3 = $i  Sensor-Identifier
    // Argument 4 = $v  Sensor Wert
    $args = explode ("&", $QUERY_STRING  );
    $nargs = count($args);
    if ($nargs != 5)
    { 
    die();
    } 
    if ($args[0] != "abcdef")
    { 
    die(); 
    }
    $date     = urldecode($args[1])  ;
    $time     = urldecode($args[2])  ;
    $device     = urldecode($args[3]);
    $temperature = urldecode($args[4]);
    $date = str_replace("'", " ", $date);
    $time = str_replace("'", " ", $time);
    $device  = str_replace("'", " ", $device);
    $temperature = str_replace("'", " ", $temperature); 
    // Daten Speichern
    $db = mysql_connect('server', 'user', 'password');
    $result = mysql_select_db('database_name', $db); 
    $result = mysql_query("delete from temperature where (device ='$device')"); 
    $result = mysql_query("INSERT INTO temperature (logdate, logtime, device, temperature)
    VALUES ('$date', '$time', '$device', '$temperature'  )", $db);
    $result = mysql_close($db); 
    ?>
  </body>
</html>